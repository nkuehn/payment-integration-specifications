key: payment-INVOICE-KLARNA
name:
  en: Payment Type for Klarna Invoice Payments
description:
  en: extends the CTP Payment Resource with the standard fields for Klarna Invoice payments, which in comparison to just INVOICE requires additional fields for risk management and does not allow deviating refund account data.
resourceTypeIds:
  - payment
fieldDefinitions:
  # Fields that all payment methods need (candidates to become a built-in):
  -
    name: reference
    type:
      name: String
    label:
      en: Short reference code that the buyer is supposed to include in the money transfer to allow identification.
    required: true
    inputHint: SingleLine
  # Clearing Data: Filled by PSP with information where the amount was actually paid from.
  -
    name: paidFromAccountHolderName
    type:
      name: String
    label:
      en: Full Name of the Bank Account Holder the invoice was paid from.
    required: false
    inputHint: SingleLine
  -
    name: paidFromIBAN
    type:
      name: String
    label:
      en: Full machine-read formatted IBAN the invoice was paid from (i.e. no spaces or separators).
    required: false
    inputHint: SingleLine
  -
    name: paidFromBIC
    type:
      name: String
    label:
      en: Full BIC the invoice was paid from (no spaces or separators).
    required: false
    inputHint: SingleLine
  # Invoice Specific Fields:
  -
    name: dueTime
    type:
      name: DateTime
    label:
      en: The point in time the Invoice is due.
    required: false
  -
    name: interfaceInvoiceId
    type:
      name: String
    label:
      en: the Invoice ID / Number / Code generated by the payment Interface. E.g. for getting the Invoice PDF etc.
    required: false
    inputHint: SingleLine
  # Fields that all payment methods with a redirect flow need (must be identical across all payment methods):
  -
    name: redirectUrl
    type:
      name: String
    label:
      en: Redirect URL passed from the PSP integration to the frontend.  If this field is set, it represents an instruction to the client implememtation to immediately redirect the User to the given place. Can / should be removed when the user hits the succes / error / cancel URLs.
    required: false
    inputHint: SingleLine
  -
    name: successUrl
    type:
      name: String
    label:
      en: Absolute URL set by the checkout client implementation that tells the PSP where to direct the Client after the steps in a redirect flow have been completed successfully.
    required: false
    inputHint: SingleLine
  -
    name: errorUrl
    type:
      name: String
    label:
      en: Absolute URL set by the checkout client implementation that tells the PSP where to direct the Client when a technical error has happened or the transaction has been denied in a redirect flow.
    required: false
    inputHint: SingleLine
  -
    name: cancelUrl
    type:
      name: String
    label:
      en: Absolute URL set by the checkout client implementation that tells the PSP where to direct the Client when the client has used a function in the redirect flow that cancels the process.
    required: false
    inputHint: SingleLine
  # Klarna specific fields
  -
    name: invoiceUrl
    type:
      name: String
    label:
      en: URL the invoice document can be downloaded from. Written back from the payment interface.
    required: false
    inputHint: SingleLine
  -
    name: personalId
    type:
      name: String
    label:
      en: Personal ID number of the buyer. Required only in certain Countries (please refer to Klarna or payment interface documentation).
    required: false
    inputHint: SingleLine
  -
    name: ipAddress
    type:
      name: String
    label:
      en: IP address the purchase process was done from.
    required: false
    inputHint: SingleLine
